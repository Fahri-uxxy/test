--[[
    SCRIPT EKSEKUTOR UNTUK MEMBUKA GIFTING MENU
    Target Item: Soul Scythe
]]

warn("--- Memulai Eksekusi Script Gifting ---")

-- 1. Setup Variabel dan Layanan dengan Aman
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TIMEOUT_SECONDS = 20 -- Waktu tunggu maksimal (detik) agar executor tidak freeze

-- Menggunakan pcall (protected call) untuk mencari lokasi module agar aman
local successLocate, scriptResult = pcall(function()
    -- Mencari folder "Controllers" dengan batas waktu
    local folder = ReplicatedStorage:WaitForChild("Controllers", TIMEOUT_SECONDS)
    if not folder then error("Folder 'Controllers' tidak ditemukan setelah menunggu.") end

    -- Mencari script "GiftingController" di dalam folder tersebut dengan batas waktu
    local modScript = folder:WaitForChild("GiftingController", TIMEOUT_SECONDS)
    if not modScript then error("ModuleScript 'GiftingController' tidak ditemukan.") end

    return modScript
end)

-- Jika gagal menemukan lokasinya, hentikan script dan beri peringatan di konsol executor
if not successLocate then
    warn("GAGAL: Tidak bisa menemukan lokasi script controller.")
    warn("Detail Error: " .. tostring(scriptResult))
    return -- Berhenti di sini
end

print("ModuleScript ditemukan. Mencoba me-require...")

-- 2. Memuat Module (require) dengan Aman
local successRequire, GiftingController = pcall(function()
    return require(scriptResult)
end)

-- Jika gagal me-require (misalnya karena anti-cheat memblokir require), beri peringatan
if not successRequire or typeof(GiftingController) ~= "table" then
    warn("GAGAL: Tidak bisa melakukan 'require' pada module tersebut.")
    warn("Detail Error: " .. tostring(GiftingController))
    return -- Berhenti di sini
end

print("Module berhasil dimuat. Mencoba menjalankan fungsi :Open...")

-- 3. EKSEKUSI PERINTAH UTAMA
-- Ini adalah inti perintah yang kamu minta tadi
local successExec, errExec = pcall(function()
    -- >>> PERINTAH UTAMA <<<
    GiftingController:Open("Soul Scythe")
end)

if successExec then
    -- Cek layar game kamu, seharusnya menunya terbuka.
    print("SUKSES: Perintah GiftingController:Open('Soul Scythe') berhasil dikirim!")
    warn("--- Eksekusi Selesai ---")
else
    warn("GAGAL: Terjadi error saat mencoba menjalankan fungsi :Open.")
    warn("Error: " .. tostring(errExec))
end
